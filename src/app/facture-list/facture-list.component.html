<div class="flex flex-col w-250 m-auto">
    <h2 class="text-center mb-15">Récapitulatif de la facture</h2>
    <mat-table [dataSource]="factures">

        <ng-container matColumnDef="designation">
            <mat-header-cell *matHeaderCellDef> Désignation </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.designation}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="quantite">
            <mat-header-cell *matHeaderCellDef> Quantité </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.quantite}} </mat-cell>
        </ng-container>


        <ng-container matColumnDef="prixUnitaire">
            <mat-header-cell *matHeaderCellDef> Prix </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.prixUnitaire}} </mat-cell>
        </ng-container>


        <ng-container matColumnDef="totalUnitaire">
            <mat-header-cell *matHeaderCellDef> Total </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.totalUnitaire}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="suppression">
            <mat-header-cell *matHeaderCellDef> Suppression </mat-header-cell>
            <mat-cell *matCellDef="let row"> <button mat-icon-button type="button"
                    (click)="onDeleteFacture(row.id)"><mat-icon>delete</mat-icon></button></mat-cell>
        </ng-container>

        <mat-header-row
            *matHeaderRowDef="['designation', 'quantite','prixUnitaire', 'totalUnitaire', 'suppression']"></mat-header-row>
        <mat-row
            *matRowDef="let row; columns: ['designation', 'quantite','prixUnitaire', 'totalUnitaire', 'suppression']"></mat-row>

    </mat-table>

    <div class="text-center mt-10">Total : <strong>{{total}} euros </strong></div>


    @if(objetForm!=null) {

    <form [formGroup]="objetForm" (ngSubmit)="onAddFacture()">

        <mat-card class=" w-100 flex flex-col m-auto mt-20 items-center text-center">
            <h2 class="text-center">Ajouter un article</h2>
            <mat-form-field class="mt-10 w-80">
                <mat-label class="size-0.5">Nouvel article</mat-label>
                <input matInput formControlName="designation" type="text" placeholder="Nom" />
            </mat-form-field>

            <mat-form-field class=" w-80">
                <mat-label>Quantité du nouvel article</mat-label>
                <input matInput formControlName="quantite" type="number" placeholder="Quantité"/>
            </mat-form-field>

            <mat-form-field class=" w-80">
                <mat-label>Prix du nouvel article</mat-label>
                <input matInput formControlName="prixUnitaire" type="number" placeholder="Prix" />
            </mat-form-field>


            <button mat-raised-button type="submit">+</button>
        </mat-card>

    </form>
    }

</div>